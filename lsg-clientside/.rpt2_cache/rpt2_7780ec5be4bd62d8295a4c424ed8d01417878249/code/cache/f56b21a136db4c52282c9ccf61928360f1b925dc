{"code":"import * as alt from 'alt';\r\nimport * as game from 'natives';\r\nimport { View } from '../../Utilities/View';\r\nexport default async () => {\r\n    let webView;\r\n    let blockAfkCameraInterval;\r\n    const url = 'http://localhost:4000/character/creator';\r\n    alt.on('character:showCreateCharacterWindow', showCreationWindow);\r\n    alt.on('character:wearClothes', wearClothes);\r\n    async function randomClothes() {\r\n        const playerId = alt.Player.local.scriptID;\r\n        game.setPedRandomComponentVariation(playerId, 1);\r\n    }\r\n    async function clearClothes() {\r\n        for (let i = 0; i < 18; i++) {\r\n            game.setPedFaceFeature(alt.Player.local.scriptID, i, 0);\r\n        }\r\n        game.setPedDefaultComponentVariation(alt.Player.local.scriptID);\r\n    }\r\n    async function changeCharacterRotation(rot) {\r\n        game.setEntityHeading(alt.Player.local.scriptID, rot);\r\n    }\r\n    async function wearClothes(characterLook) {\r\n        game.setPedHeadBlendData(alt.Player.local.scriptID, characterLook.fatherFaceId, characterLook.motherFaceId, 0, characterLook.skinColour, 0, 0, characterLook.shapeMix, 0, 0, true);\r\n        game.setPedComponentVariation(alt.Player.local.scriptID, 2, characterLook.hairId, 0, 0);\r\n        game.setPedHairColor(alt.Player.local.scriptID, characterLook.hairColor, characterLook.hairColorTwo);\r\n        game.setPedComponentVariation(alt.Player.local.scriptID, 4, characterLook.legsId, characterLook.legsTexture, 0);\r\n        game.setPedComponentVariation(alt.Player.local.scriptID, 6, characterLook.shoesId, characterLook.shoesTexture, 0);\r\n        game.setPedComponentVariation(alt.Player.local.scriptID, 3, characterLook.torsoId, characterLook.torsoTexture, 0);\r\n        game.setPedComponentVariation(alt.Player.local.scriptID, 8, characterLook.undershirtId, characterLook.undershirtTexture, 0);\r\n        game.setPedComponentVariation(alt.Player.local.scriptID, 11, characterLook.topId, characterLook.topTexture, 0);\r\n        game.setPedPropIndex(alt.Player.local.scriptID, 0, characterLook.hatId, characterLook.hatTexture, false);\r\n        game.setPedPropIndex(alt.Player.local.scriptID, 1, characterLook.glassesId, characterLook.glassesTexture, false);\r\n        game.setPedFaceFeature(alt.Player.local.scriptID, 0, characterLook.noseWidth);\r\n        game.setPedFaceFeature(alt.Player.local.scriptID, 1, characterLook.nosePeakHight);\r\n        game.setPedFaceFeature(alt.Player.local.scriptID, 2, characterLook.nosePeakLenght);\r\n        game.setPedFaceFeature(alt.Player.local.scriptID, 3, characterLook.noseBoneHigh);\r\n        game.setPedFaceFeature(alt.Player.local.scriptID, 4, characterLook.nosePeakLowering);\r\n        game.setPedFaceFeature(alt.Player.local.scriptID, 5, characterLook.noseBoneTwist);\r\n        game.setPedFaceFeature(alt.Player.local.scriptID, 6, characterLook.eyeBrownHigh);\r\n        game.setPedFaceFeature(alt.Player.local.scriptID, 7, characterLook.eyeBrownForward);\r\n        game.setPedFaceFeature(alt.Player.local.scriptID, 8, characterLook.cheeksBoneHigh);\r\n        game.setPedFaceFeature(alt.Player.local.scriptID, 9, characterLook.cheeksBoneWidth);\r\n        game.setPedFaceFeature(alt.Player.local.scriptID, 10, characterLook.cheeksWidth);\r\n        game.setPedFaceFeature(alt.Player.local.scriptID, 11, characterLook.eyesOpenning);\r\n        game.setPedFaceFeature(alt.Player.local.scriptID, 12, characterLook.lipsThickness);\r\n        game.setPedFaceFeature(alt.Player.local.scriptID, 13, characterLook.jawBoneBackLenght);\r\n        game.setPedFaceFeature(alt.Player.local.scriptID, 14, characterLook.chimpBoneLenght);\r\n        game.setPedFaceFeature(alt.Player.local.scriptID, 15, characterLook.chimpBoneWidth);\r\n        game.setPedFaceFeature(alt.Player.local.scriptID, 16, characterLook.chimpHole);\r\n        game.setPedFaceFeature(alt.Player.local.scriptID, 18, characterLook.neckThikness);\r\n        alt.setTimeout(() => { }, 200);\r\n        game.setPedEyeColor(alt.Player.local.scriptID, characterLook.earsColor);\r\n        game.setPedHeadOverlay(alt.Player.local.scriptID, 2, characterLook.eyebrowsId, characterLook.eyeBrowsOpacity);\r\n        game.setPedHeadOverlayColor(alt.Player.local.scriptID, 2, 1, characterLook.firstEyebrowsColor, characterLook.secondEyebrowsColor);\r\n        game.setPedHeadOverlay(alt.Player.local.scriptID, 0, characterLook.blemishesId, characterLook.blemishesOpacity);\r\n        game.setPedHeadOverlay(alt.Player.local.scriptID, 3, characterLook.ageingId, characterLook.ageingOpacity);\r\n        game.setPedHeadOverlay(alt.Player.local.scriptID, 4, characterLook.makeupId, characterLook.makeupOpacity);\r\n        game.setPedHeadOverlayColor(alt.Player.local.scriptID, 4, 2, characterLook.firstMakeupColor, characterLook.secondMakeupColor);\r\n        game.setPedHeadOverlay(alt.Player.local.scriptID, 5, characterLook.blushId, characterLook.blushOpacity);\r\n        game.setPedHeadOverlayColor(alt.Player.local.scriptID, 5, 1, characterLook.blushColor, characterLook.blushColor);\r\n        game.setPedHeadOverlay(alt.Player.local.scriptID, 8, characterLook.lipstickId, characterLook.lipstickOpacity);\r\n        game.setPedHeadOverlayColor(alt.Player.local.scriptID, 8, 1, characterLook.firstLipstickColor, characterLook.secondLipstickColor);\r\n        game.setPedHeadOverlay(alt.Player.local.scriptID, 1, characterLook.beardId, characterLook.beardOpacity);\r\n        game.setPedHeadOverlayColor(alt.Player.local.scriptID, 1, 1, characterLook.beardColor, characterLook.beardColor);\r\n    }\r\n    async function getNumberOfTextureVariation(componentId, componentIdTwo, componentIdThree, isProp = false) {\r\n        const map = [];\r\n        if (isProp) {\r\n            for (let i = 0; i < game.getNumberOfPedPropDrawableVariations(alt.Player.local.scriptID, componentId); i++) {\r\n                map.push({ index: i, variation: game.getNumberOfPedPropTextureVariations(alt.Player.local.scriptID, componentId, i) });\r\n            }\r\n            return webView.emit('characterCreator:clothesVariation', map);\r\n        }\r\n        alt.log('Wywoluje sie');\r\n        for (let i = 0; i < game.getNumberOfPedDrawableVariations(alt.Player.local.scriptID, componentId); i++) {\r\n            map.push({ index: i, variation: game.getNumberOfPedTextureVariations(alt.Player.local.scriptID, componentId, i), component: componentId });\r\n        }\r\n        if (componentIdTwo !== undefined || componentIdTwo !== null) {\r\n            for (let i = 0; i < game.getNumberOfPedDrawableVariations(alt.Player.local.scriptID, componentIdTwo); i++) {\r\n                map.push({ index: i, variation: game.getNumberOfPedTextureVariations(alt.Player.local.scriptID, componentIdTwo, i), component: componentIdTwo });\r\n            }\r\n        }\r\n        if (componentIdThree !== undefined || componentIdThree !== null) {\r\n            for (let i = 0; i < game.getNumberOfPedDrawableVariations(alt.Player.local.scriptID, componentIdThree); i++) {\r\n                map.push({ index: i, variation: game.getNumberOfPedTextureVariations(alt.Player.local.scriptID, componentIdThree, i), component: componentIdThree });\r\n            }\r\n        }\r\n        webView.emit('characterCreator:clothesVariation', map);\r\n    }\r\n    async function showCreationWindow() {\r\n        if (!webView) {\r\n            webView = new View();\r\n        }\r\n        if (alt.Player.local.getMeta('viewOpen'))\r\n            return;\r\n        webView.open('', true, 'character/creator');\r\n        blockAfkCameraInterval = alt.setInterval(() => {\r\n            game.invalidateIdleCam();\r\n        }, 10000);\r\n        webView.on('cef:characterCreatorRandomClothes', randomClothes);\r\n        webView.on('cef:characterCreatorClearClothes', clearClothes);\r\n        webView.on('cef:characterCreatorChangeRotation', changeCharacterRotation);\r\n        webView.on('cef:characterCreatorUpdateClothes', wearClothes);\r\n        webView.on('cef:characterCreatorGetComponentsVariation', getNumberOfTextureVariation);\r\n        webView.on('cef:closeCharacterCreator', closeCharacterCreatorWindow);\r\n    }\r\n    async function closeCharacterCreatorWindow() {\r\n        alt.clearInterval(blockAfkCameraInterval);\r\n        webView.close();\r\n    }\r\n};\r\n","references":["B:/Projekty/LSGamble-Clientside/lsg-clientside/modules/Core/Utilities/View.ts","B:/Projekty/LSGamble-Clientside/lsg-clientside/modules/Constant/Keys/Key.ts","B:/Projekty/LSGamble-Clientside/lsg-clientside/modules/Core/Entities/Player.ts","B:/Projekty/LSGamble-Clientside/lsg-clientside/modules/Models/characterLook.ts"]}
